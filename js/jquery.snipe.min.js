/*! jquery.snipe - v0.2.0 - 2013-07-09 */!function(){var a,b,c,d;a=jQuery,d={"class":"snipe-lens",size:200,animation:null,image:null,cursor:"none",bounds:[],css:{borderRadius:200,width:200,height:200,border:"2px solid white",backgroundColor:"white",boxShadow:"0 0 10px #777, 0 0 8px black inset, 0 0 80px white inset",position:"absolute",top:0,left:0,backgroundRepeat:"no-repeat"},zoomin:function(){},zoomout:function(){},zoommoved:function(){}},b=function(){function a(a,b,c,d){return this.top=a,this.right=b,this.bottom=c,this.left=d,this}return a.prototype.update=function(a,b,c,d){this.top=a,this.right=b,this.bottom=c,this.left=d},a.prototype.contains=function(a,b){return this.left<a&&a<this.right&&this.top<b&&b<this.bottom},a}(),c=function(){function c(b,c){var d=this;return this.el=b,null==c&&(c={}),this._makeSettings(c),this.el.one("load",function(){return d._makeBounds()}),this.complete&&this.el.load(),this.el.data("snipe",this),this.lens=a("<div>").addClass(this.settings["class"]).css("display","none").appendTo("body"),this.ratioX=1,this.ratioY=1,this.ratioEl=a("<img>").attr("src",this.settings.image),this.ratioEl.one("load",function(){return d.calculateRatio.call(d)}).each(function(){return this.complete?a(this).load():void 0}),this.el.bind("mousemove",function(a){return d.onMouseMove(a)}),this.el}return c.prototype._makeSettings=function(b){var c;return this.el.is("a")?(c=this.el.find("img:first"),this.defaults.image=b.image||this.el.attr("href")):(c=this.el.is("img")?this.el:this.el.find("img:first"),this.defaults.image=b.image||this.el.data("zoom")||this.el.attr("src")),this.el=c,this.defaults.css.backgroundImage="url("+this.defaults.image+")",this.defaults.css.cursor=b.cursor||this.defaults.cursor,this.settings=a.extend({},this.defaults,b,forceSettings),this.settings.css=a.extend({},this.defaults.css,b&&b.css,forceSettings.css)},c.prototype._makeBounds=function(){return this.offset=this.el.offset(),this.bounds=new b(this.offset.top,this.offset.left+this.el.width(),this.offset.top+this.el.height(),this.offset.left)},c.prototype._makeRatio=function(){return this.ratioX=this.ratioEl[0].width/this.el[0].width,this.ratioY=this.ratioEl[0].height/this.el[0].height,this.ratioEl.remove(),this.lens.css(this.settings.css),this.run()},c.prototype._updateBounds=function(){return this.offset=this.el.offset(),this.bounds.update(this.offset.top,this.offset.left+this.el.width(),this.offset.top+this.el.height(),this.offset.left)},c.prototype._onMouseMove=function(a){var b,c;if(null!=this.bounds||!this.lens.not(":animated"))return this.bounds.contains(a.pageX,a.pageY)||this.hide(),b=-((a.pageX-this.offset.left)*this.ratioX-.5*this.settings.size),c=-((a.pageY-this.offset.top)*this.ratioY-.5*this.settings.size),this.lens.css({left:a.pageX-.5*this.settings.size,top:a.pageY-.5*this.settings.size,backgroundPosition:""+b+"px "+c+"px"})},c.prototype._run=function(){return this.hide()},c.prototype.show=function(){var a=this;return this.makeBounds(),this.el.unbind("mousemove"),this.el.unbind("mouseover"),this.body.bind("mousemove",function(b){return a.onMouseMove(b)}),this.lens.show().css({opacity:1,cursor:this.settings.css.cursor}),this},c.prototype.hide=function(){var a=this;return this.el.bind("mouseover",function(){return a.show()}),this.body.unbind("mousemove"),this.lens.css({opacity:0,cursor:"default"}).hide(),this},c}(),function(a){return a.fn.snipe=function(b){return this.each(function(){return a(this).data("snipe")||new c(a(this),b)})}}(jQuery)}.call(this);