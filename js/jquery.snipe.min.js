(function(){var t,s,i,e,o;t=jQuery,e={"class":"snipe-lens",size:200,animation:null,image:null,cursor:"none",bounds:[],css:{borderRadius:200,width:200,height:200,border:"2px solid white",backgroundColor:"white",boxShadow:"0 0 10px #777, 0 0 8px black inset, 0 0 80px white inset"},zoomin:function(){},zoomout:function(){},zoommoved:function(){}},o={position:"absolute",top:0,left:0,backgroundRepeat:"no-repeat"},s=function(){function t(t,s,i,e){return this.top=t,this.right=s,this.bottom=i,this.left=e,this}return t.prototype.contains=function(t,s){return t>this.left&&this.right>t&&s>this.top&&this.bottom>s},t}(),i=function(){function i(s,i){var e=this;return this.el=s,null==i&&(i={}),this.body=t("body"),this.settings=this.makeSettings(i),this.el.one("load",function(){return e.offset=e.el.offset(),e.bounds=e.makeBounds()}).each(function(){return this.complete?t(this).load():void 0}),this.lens=t("<div>").addClass(this.settings["class"]).css("display","none").appendTo("body"),this.ratioX=1,this.ratioY=1,this.ratioEl=t("<img>").load(function(){return e.calculateRatio(e)}).attr("src",this.settings.image).css("display","none").appendTo(this.el.parent()),this.el.bind("mousemove",function(t){return e.onMouseMove(t)}),this.el}return i.prototype.makeSettings=function(s){var i;return this.el.is("a")?(i=this.el.find("img:first"),e.image=s.image||this.el.attr("href")):(i=this.el.is("img")?this.el:this.el.find("img:first"),e.image=s.image||this.el.data("zoom")||this.el.attr("src")),this.el=i,e.css.backgroundImage="url("+e.image+")",e.css.cursor=s.cursor||e.cursor,e.css=t.extend({},e.css,s&&s.css,o),t.extend({},e,s)},i.prototype.makeBounds=function(){return new s(this.offset.top,this.offset.left+this.el.width(),this.offset.top+this.el.height(),this.offset.left)},i.prototype.run=function(){return this.hide()},i.prototype.calculateRatio=function(t){return t.ratioX=t.ratioEl.width()/t.el.width(),t.ratioY=t.ratioEl.height()/t.el.height(),t.ratioEl.remove(),t.lens.css(t.settings.css),t.run(),t},i.prototype.onMouseMove=function(t){var s,i;if(null!=this.bounds||!this.lens.not(":animated"))return this.bounds.contains(t.pageX,t.pageY)||this.hide(),s=-((t.pageX-this.offset.left)*this.ratioX-.5*this.settings.size),i=-((t.pageY-this.offset.top)*this.ratioY-.5*this.settings.size),this.lens.css({left:t.pageX-.5*this.settings.size,top:t.pageY-.5*this.settings.size,backgroundPosition:s+"px "+i+"px"})},i.prototype.show=function(t){var s=this;return null==t&&(t=!0),this.el.unbind("mousemove"),this.el.unbind("mouseover"),this.body.bind("mousemove",function(t){return s.onMouseMove(t)}),this.lens.show().css({opacity:1,cursor:this.settings.css.cursor}),this},i.prototype.hide=function(t){var s=this;return null==t&&(t=!0),this.el.bind("mouseover",function(){return s.show()}),this.body.unbind("mousemove"),this.lens.css({opacity:0,cursor:"default"}).hide(),this},i}(),function(t){return t.fn.snipe=function(t){return new i(this,t)}}(jQuery)}).call(this);